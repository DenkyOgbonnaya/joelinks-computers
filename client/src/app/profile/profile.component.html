<div class="profile_container">
    <h4>Profile</h4>
    <div class="profile">
        <div class="wrapper">
            <div class="image_wrapper">
                <img src="/assets/images/defavatar.png" alt="profile pix" />
            </div>
            <button class="btn btn-sm btn-outline-danger logout_btn" (click)="logout()">Log out</button>
        </div>
        
        <div class="name"> <b>{{user?.username}}</b></div>
        <div class="email"> <i>{{user?.email}}</i></div>
    </div>
    <hr>
    <h4>Personal information</h4>
    <div class="container">
        <form [formGroup] ="profileForm" (ngSubmit)="saveProfile(profileForm.value)">
            <div class="alert alert-danger" *ngIf="errorMessage">{{errorMessage}}</div>
            <div class="row">
                <div class="col">
                    <div class="form-group">
                        <label for="firstname">First name</label>
                        <input type="text" formControlName="firstname" placeholder="first name" class="form-control" name="firstname" />
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label for="lastname">Last name</label>
                        <input type="text" formControlName="lastname" placeholder="last name" class="form-control" name="lastname" />
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <div class="form-group">
                        <label for="phone">Phone number</label>
                        <input type="text" formControlName="phone" placeholder="phone" class="form-control" name="phone" />
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label for="address">Address</label>
                        <input type="text" formControlName="address" placeholder="address" class="form-control" name="address" />
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <div class="form-group">
                        <label for="city">City</label>
                        <input type="text" formControlName="city" placeholder="city" class="form-control" name="city" />    
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label for="state">State</label>
                        <input type="text" formControlName="state" placeholder="state" class="form-control" name="state" />
                    </div>
                </div>
            </div>
            <button type="submit" class="btn btn-danger" [disabled]="!profileForm.dirty" >
                <span *ngIf="!isLoading">Save</span>
                <div *ngIf="isLoading" class="spinner-border text-light spinner-border-sm" role="status">
                    <span class="sr-only">loading...</span>
                </div>
            </button>
        </form>
    </div>
</div>